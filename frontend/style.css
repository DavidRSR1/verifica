/**
 * 
 * COMENTÁRIOS GERADOS PARA FACILITAR ENTENDIMENTO DA EQUIPE
 * 
 * 1. As variáveis CSS são tokens principais para cores, fontes e radius.
 * 2. Existe um tema claro alternado por [data-theme="light"].
 * 3. Os seletores estão organizados da seguinte maneira:
 *    - HEADER: header, logo, tagline, auth-area, etc.
 *    - THEME TOGGLE: botão para alternar tema
 *    - PROVIDER TABS: aba dos fornecedores
 *    - LAYOUT/SIDEBAR/MAIN: estruturas principais do layout
 *    - FILTERS: filtros do sistema, inclusive badge ativa
 *    - COMPONENTES: KPI, Tables, Badges, Tags de Produto, Estados de Vazio/Loading
 * 4. Estruture suas adições abaixo dos comentários correspondentes.
 * 5. Sempre preferir variáveis CSS para cores e bordas.
 * 6. Para a equipe: manter comentários e organização por bloco. Caso crie novos componentes, siga esse padrão.
 */


/* ── TOKENS ─────────────────────────────────────────────────── */
/* Token principais (cores, fontes, radius, sombra) */
:root {
  --bg:#0d0f14;
  --surface:#161920;
  --surface2:#1e2230;
  --border:#2a2f42;
  --text:#e8eaf0;
  --muted:#6b7291;
  --accent:#00C896;
  --radius:10px;
  --font-head:'Syne',sans-serif;
  --font-mono:'IBM Plex Mono',monospace;
  --shadow: 0 4px 20px rgba(0,0,0,.4);
}

/* ── LIGHT THEME ─────────────────────────────────────────────── */
/* Variáveis adaptadas para o tema claro via data-theme */
[data-theme="light"] {
  --bg:#f0f2f7;
  --surface:#ffffff;
  --surface2:#e8ecf4;
  --border:#d0d5e8;
  --text:#1a1d2e;
  --muted:#7a82a0;
  --accent:#00a87a;
  --radius:10px;
  --shadow: 0 4px 20px rgba(0,0,0,.1);
}

/* Reset básico para responsividade */
* { box-sizing:border-box; margin:0; padding:0; }
body {
  background:var(--bg);
  color:var(--text);
  font-family:var(--font-head);
  min-height:100vh;
  transition:background .25s,color .25s;
}

/* HEADER */
/* Área do topo com logo, login e ações rápidas */
header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 28px;
  border-bottom:1px solid var(--border);
  background:var(--surface);
  gap:16px;
  flex-wrap:wrap;
  box-shadow:var(--shadow);
}
.logo {
  font-size:1.05rem;
  font-weight:800;
  letter-spacing:.04em;
  display:flex;
  align-items:center;
  gap:9px;
}
.logo span { color:var(--accent); }
.header-right { display:flex;align-items:center;gap:12px;flex-wrap:wrap }
.tagline {
  font-size:.65rem;
  color:var(--muted);
  font-family:var(--font-mono);
  letter-spacing:.1em;
}
.auth-area { display:flex;align-items:center;gap:8px }
.auth-input {
  background:var(--surface2);
  border:1px solid var(--border);
  color:var(--text);
  font-family:var(--font-mono);
  font-size:.7rem;
  padding:6px 10px;
  border-radius:var(--radius);
  outline:none;
  width:240px;
  transition:border-color .2s;
}
.auth-input:focus { border-color:var(--accent); }
.auth-btn {
  padding:6px 13px;
  border-radius:var(--radius);
  border:1px solid var(--accent);
  background:transparent;
  color:var(--accent);
  font-family:var(--font-head);
  font-weight:600;
  font-size:.7rem;
  cursor:pointer;
  transition:all .18s;
  white-space:nowrap;
}
.auth-btn:hover { background:var(--accent); color:#000; }
.auth-btn.logout { border-color:var(--muted); color:var(--muted); }
.auth-btn.logout:hover { background:var(--muted); color:#000; }
.user-chip {
  display:flex;
  align-items:center;
  gap:7px;
  padding:5px 12px;
  border-radius:20px;
  background:rgba(0,200,150,.1);
  border:1px solid rgba(0,200,150,.2);
  font-size:.7rem;
  font-family:var(--font-mono);
  color:var(--accent);
}

/* ── THEME TOGGLE ────────────────────────────────────────────── */
/* Botão para alternar entre escuro/claro, sempre seguir tokens */
.theme-toggle-btn {
  padding:6px 13px;
  border-radius:var(--radius);
  border:1px solid var(--border);
  background:var(--surface2);
  color:var(--muted);
  font-family:var(--font-head);
  font-weight:600;
  font-size:.7rem;
  cursor:pointer;
  transition:all .18s;
  white-space:nowrap;
  display:flex;
  align-items:center;
  gap:5px;
}
.theme-toggle-btn:hover { border-color:var(--accent); color:var(--accent); }

/* PROVIDER TABS */
/* Gerenciamento das abas de fornecedores no topo principal */
.provider-tabs {
  display:flex;
  gap:0;
  border-bottom:1px solid var(--border);
  padding:0 28px;
  background:var(--surface);
  overflow-x:auto;
}
.tab-btn {
  padding:12px 20px;
  font-family:var(--font-head);
  font-weight:600;
  font-size:.78rem;
  letter-spacing:.05em;
  color:var(--muted);
  background:none;
  border:none;
  border-bottom:2px solid transparent;
  cursor:pointer;
  transition:all .2s;
  display:flex;
  align-items:center;
  gap:8px;
  white-space:nowrap;
  position:relative;
}
.tab-btn:hover { color:var(--text); }
.tab-btn.active { color:var(--text); }
.provider-icon { font-size:1rem; }
.provider-name { font-size:.8rem; font-weight:700; letter-spacing:.04em; }
.provider-active-dot {
  width:6px;
  height:6px;
  border-radius:50%;
  animation:pulse 2s infinite;
}
/* Animação do ponto ativo nas abas */
@keyframes pulse {
  0%,100% { opacity:1; transform:scale(1); }
  50% { opacity:.5; transform:scale(.8); }
}
.coming-soon-tag {
  font-size:.58rem;
  padding:2px 6px;
  border-radius:10px;
  background:var(--border);
  color:var(--muted);
  font-family:var(--font-mono);
}

/* ── PROVIDER BADGE no posto header ─────────────────────────── */
/* Badge de provedor (fornecedor), acima dos dados do posto */
.provider-badge {
  display:inline-flex;
  align-items:center;
  gap:5px;
  padding:3px 10px;
  border-radius:20px;
  font-size:.68rem;
  font-weight:700;
  font-family:var(--font-mono);
  border:1px solid;
  letter-spacing:.04em;
}
.posto-meta {
  display:flex;
  align-items:center;
  gap:10px;
  font-size:.68rem;
  color:var(--muted);
  font-family:var(--font-mono);
  margin-top:3px;
  flex-wrap:wrap;
}

/* LAYOUT */
/* Grid principal do app: sidebar à esquerda, conteúdo central à direita */
.layout {
  display:grid;
  grid-template-columns:255px 1fr;
  min-height:calc(100vh - 108px);
}

/* SIDEBAR */
/* Navegação lateral, lista de postos/squads */
aside {
  background:var(--surface);
  border-right:1px solid var(--border);
  overflow-y:auto;
}
.sidebar-header {
  padding:16px 18px 10px;
  border-bottom:1px solid var(--border);
}
.sidebar-title {
  font-size:.6rem;
  font-weight:700;
  letter-spacing:.14em;
  color:var(--muted);
  text-transform:uppercase;
  font-family:var(--font-mono);
}
.squad-group { margin-top:4px; }
.squad-label {
  font-size:15px;
  font-weight:700;
  letter-spacing:.12em;
  color:var(--muted);
  padding:10px 18px 4px;
  text-transform:uppercase;
  font-family:var(--font-mono);
  opacity:.55;
  display:flex;
  align-items:center;
  gap:10px;
}
.squad-label::before {
  content:'';
  display:block;
  height:1px;
  width:12px;
  background:var(--border);
}
.posto-list-inner {
  padding:4px 10px;
  display:flex;
  flex-direction:column;
  gap:2px;
}
.posto-item {
  padding:10px 10px;
  border-radius:var(--radius);
  cursor:pointer;
  transition:all .16s;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}
.posto-item:hover { background:var(--surface2); }
.posto-item.active {
  background:linear-gradient(135deg,rgba(0,200,150,.13),rgba(0,200,150,.04));
  border:1px solid rgba(0,200,150,.22);
}
.posto-info { flex:1; min-width:0; }
.posto-name {
  font-size:.78rem;
  font-weight:600;
  color:var(--muted);
  line-height:1.3;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.posto-item.active .posto-name { color:var(--accent); }
.posto-item:hover .posto-name { color:var(--text); }
.posto-cnpj {
  font-size:.60rem;
  color:var(--muted);
  font-family:var(--font-mono);
  margin-top:2px;
  opacity:.6;
}
.posto-arrow {
  opacity:.25;
  font-size:.6rem;
  flex-shrink:0;
}
.posto-item.active .posto-arrow { opacity:1; color:var(--accent); }
.no-postos {
  padding:28px 18px;
  color:var(--muted);
  font-size:.76rem;
  text-align:center;
  font-family:var(--font-mono);
  line-height:1.7;
}

/* MAIN */
/* Conteúdo principal central do app, abaixo do header */
main {
  padding:24px 28px;
  overflow-y:auto;
}

/* FILTERS */
/* Filtros principais para busca/listagem de faturas */
.filters {
  display:flex;
  align-items:center;
  gap:9px;
  margin-bottom:22px;
  flex-wrap:wrap;
}
.filter-group {
  display:flex;
  align-items:center;
  gap:7px;
  background:var(--surface);
  border:1px solid var(--border);
  padding:7px 12px;
  border-radius:var(--radius);
  transition:border-color .2s;
}
.filter-group:focus-within { border-color:var(--accent); }
.filter-group label {
  font-size:.6rem;
  font-weight:700;
  letter-spacing:.1em;
  color:var(--muted);
  text-transform:uppercase;
  font-family:var(--font-mono);
}
.filter-group input[type=date] {
  background:none;
  border:none;
  color:var(--text);
  font-family:var(--font-mono);
  font-size:.78rem;
  outline:none;
  cursor:pointer;
  width:124px;
}
.filter-group input[type=date]::-webkit-calendar-picker-indicator {
  filter:invert(.4);
  cursor:pointer;
}
/* Melhor contraste para tema claro */
[data-theme="light"] .filter-group input[type=date]::-webkit-calendar-picker-indicator {
  filter:invert(.6);
}
.filter-btn {
  padding:7px 16px;
  border-radius:var(--radius);
  border:1px solid var(--accent);
  background:transparent;
  color:var(--accent);
  font-family:var(--font-head);
  font-weight:700;
  font-size:.76rem;
  cursor:pointer;
  transition:all .18s;
  letter-spacing:.04em;
}
.filter-btn:hover { background:var(--accent); color:#000; }
.quick-btns { display:flex; gap:4px; }
.quick-btn {
  padding:5px 10px;
  border-radius:var(--radius);
  border:1px solid var(--border);
  background:transparent;
  color:var(--muted);
  font-family:var(--font-mono);
  font-size:.66rem;
  cursor:pointer;
  transition:all .14s;
}
.quick-btn:hover { border-color:var(--accent); color:var(--accent); }

/* ── FILTER ACTIVE BADGE ─────────────────────────────────────── */
/* Badge para indicar filtro de datas ativo. Utilizar apenas via JS! */
.filter-badge {
  display:none;
  align-items:center;
  gap:6px;
  padding:5px 12px;
  border-radius:20px;
  font-size:.68rem;
  font-family:var(--font-mono);
  font-weight:700;
  background:rgba(0,200,150,.15);
  border:1.5px solid var(--accent);
  color:var(--accent);
  animation:fadeIn .3s ease;
}
.filter-badge.single-day {
  background:rgba(255,183,0,.15);
  border-color:#FFB700;
  color:#FFB700;
  font-size:.75rem;
  padding:6px 14px;
  box-shadow:0 0 10px rgba(255,183,0,.25);
}
@keyframes fadeIn {
  from { opacity:0; transform:translateY(-4px); }
  to { opacity:1; transform:translateY(0); }
}

/* FETCH INDICATOR */
/* Indicador animado ao buscar dados (ex: loading de API) */
.fetch-indicator {
  display:none;
  align-items:center;
  gap:9px;
  font-size:.7rem;
  font-family:var(--font-mono);
  color:var(--accent);
  padding:9px 14px;
  background:rgba(0,200,150,.07);
  border:1px solid rgba(0,200,150,.18);
  border-radius:var(--radius);
  margin-bottom:16px;
}
.fetch-indicator.active { display:flex; }

/* KPIs */
/* Grid para indicadores rápidos acima da tabela */
.kpi-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(168px,1fr));
  gap:13px;
  margin-bottom:24px;
}
.kpi {
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:15px 17px;
  position:relative;
  overflow:hidden;
  transition:box-shadow .2s;
}
.kpi:hover { box-shadow:var(--shadow); }
.kpi::before {
  content:'';
  position:absolute;
  top:0; left:0; right:0;
  height:2px;
  background:var(--kpi-color,var(--accent));
}
.kpi-label {
  font-size:.6rem;
  font-weight:700;
  letter-spacing:.11em;
  color:var(--muted);
  text-transform:uppercase;
  font-family:var(--font-mono);
  margin-bottom:8px;
}
.kpi-value { font-size:1.35rem; font-weight:800; line-height:1; }
.kpi-sub { font-size:.65rem; color:var(--muted); font-family:var(--font-mono); margin-top:5px; }

/* SECTION TABS */
/* Abas para filtrar o tipo de visualização dentro da página */
.section-tabs {
  display:flex;
  gap:4px;
  margin-bottom:16px;
  border-bottom:1px solid var(--border);
}
.section-tab {
  padding:9px 15px;
  font-family:var(--font-head);
  font-weight:600;
  font-size:.77rem;
  color:var(--muted);
  background:none;
  border:none;
  border-bottom:2px solid transparent;
  cursor:pointer;
  transition:all .16s;
  letter-spacing:.04em;
}
.section-tab.active { color:var(--accent); border-bottom-color:var(--accent); }
.section-tab:hover { color:var(--text); }

/* TABLE */
/* Tabela principal de dados. Th recebe setas de sorting pelo JS. */
.table-wrap {
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--radius);
  overflow:hidden;
}
.table-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 16px;
  border-bottom:1px solid var(--border);
  flex-wrap:wrap;
  gap:8px;
}
.table-title {
  font-size:.75rem;
  font-weight:700;
  letter-spacing:.05em;
}
.table-count { font-size:.65rem; color:var(--muted); font-family:var(--font-mono); }
.table-scroll { overflow-x:auto; }
table { width:100%; border-collapse:collapse; }
th {
  font-size:.58rem;
  font-weight:700;
  letter-spacing:.11em;
  color:var(--muted);
  text-transform:uppercase;
  font-family:var(--font-mono);
  padding:9px 13px;
  text-align:left;
  background:var(--surface2);
  border-bottom:1px solid var(--border);
  white-space:nowrap;
  cursor:pointer;
  user-select:none;
  transition:color .15s;
}
th:hover { color:var(--text); }
th.sort-asc,th.sort-desc { color:var(--accent); }
th .sort-arrow {
  margin-left:5px;
  opacity:.5;
  font-size:.7em;
}
th.sort-asc .sort-arrow::after { content:'↑'; opacity:1; }
th.sort-desc .sort-arrow::after { content:'↓'; opacity:1; }
th:not(.sort-asc):not(.sort-desc) .sort-arrow::after { content:'↕'; opacity:.3; }
.date-mode-toggle {
  display:flex;
  align-items:center;
  gap:10px;
  font-size:.65rem;
  font-family:var(--font-mono);
  color:var(--muted);
}
.mode-active { color:var(--accent); font-weight:700; }
.toggle-switch {
  position:relative;
  display:inline-block;
  width:34px;
  height:18px;
  cursor:pointer;
  flex-shrink:0;
}
.toggle-switch input { opacity:0; width:0; height:0; }
.toggle-slider {
  position:absolute;
  inset:0;
  background:var(--border);
  border-radius:18px;
  transition:.2s;
}
.toggle-slider::before {
  content:'';
  position:absolute;
  width:12px;
  height:12px;
  left:3px;
  top:3px;
  background:var(--muted);
  border-radius:50%;
  transition:.2s;
}
.toggle-switch input:checked+.toggle-slider {
  background:rgba(0,200,150,.3);
  border:1px solid var(--accent);
}
.toggle-switch input:checked+.toggle-slider::before {
  transform:translateX(16px);
  background:var(--accent);
}
td {
  padding:10px 13px;
  border-bottom:1px solid rgba(128,128,128,.08);
  font-family:var(--font-mono);
  color:var(--text);
  font-size:.76rem;
  white-space:nowrap;
}
tr:last-child td { border-bottom:none; }
tr:hover td { background:rgba(128,128,128,.05); }
.badge {
  display:inline-flex;
  align-items:center;
  padding:2px 8px;
  border-radius:20px;
  font-size:.6rem;
  font-weight:700;
  font-family:var(--font-mono);
}
.badge-green { background:rgba(0,200,150,.13); color:#00C896; border:1px solid rgba(0,200,150,.2);}
.badge-yellow { background:rgba(255,183,0,.1); color:#FFB700; border:1px solid rgba(255,183,0,.18);}
.badge-red { background:rgba(255,80,80,.1); color:#FF5050; border:1px solid rgba(255,80,80,.18);}
.badge-blue { background:rgba(80,130,255,.1); color:#5082FF; border:1px solid rgba(80,130,255,.18);}
.money { color:#00C896; }
.number { color:#5082FF; }

/* ── PRODUTO TAGS ────────────────────────────────────────────── */
/* Tags para "DIESEL" e "ARLA" nas colunas da tabela */
.tag-diesel {
  display:inline-flex;
  align-items:center;
  gap:4px;
  padding:2px 8px;
  border-radius:20px;
  font-size:.62rem;
  font-weight:700;
  font-family:var(--font-mono);
  background:rgba(255,183,0,.12);
  color:#FFB700;
  border:1px solid rgba(255,183,0,.2);
}
.tag-arla {
  display:inline-flex;
  align-items:center;
  gap:4px;
  padding:2px 8px;
  border-radius:20px;
  font-size:.62rem;
  font-weight:700;
  font-family:var(--font-mono);
  background:rgba(0,188,212,.12);
  color:#00bcd4;
  border:1px solid rgba(0,188,212,.2);
}
.produto-misto {
  display:inline-flex;
  align-items:center;
  gap:4px;
  flex-wrap:wrap;
}

/* ── BADGE ISENTA NF ─────────────────────────────────────────── */
/* Badge especial para indicar faturas isentas (azul claro) */
.badge-isenta {
  display:inline-flex;
  align-items:center;
  padding:1px 6px;
  border-radius:10px;
  font-size:.55rem;
  font-weight:700;
  font-family:var(--font-mono);
  background:rgba(80,130,255,.1);
  color:#5082FF;
  border:1px solid rgba(80,130,255,.15);
  margin-left:5px;
  vertical-align:middle;
  cursor:help;
}

/* STATES */
/* Estilos para estados: vazio, loading, sem seleção, etc */
.empty-state {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:56px;
  color:var(--muted);
  gap:11px;
}
.empty-icon { font-size:2rem; opacity:.3; }
.empty-text { font-size:.79rem; font-family:var(--font-mono); }
.loading {
  display:flex;
  align-items:center;
  justify-content:center;
  padding:48px;
  gap:11px;
  color:var(--muted);
  font-family:var(--font-mono);
  font-size:.76rem;
}
.spinner {
  width:15px;
  height:15px;
  border:2px solid var(--border);
  border-top-color:var(--accent);
  border-radius:50%;
  animation:spin .7s linear infinite;
  flex-shrink:0;
}
@keyframes spin { to{ transform:rotate(360deg) } }
.no-selection {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:280px;
  color:var(--muted);
  gap:13px;
}
.no-selection .icon { font-size:2.6rem; opacity:.22; }
.no-selection p { font-size:.79rem; font-family:var(--font-mono); }
.coming-soon-block {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:280px;
  gap:14px;
  color:var(--muted);
}
.coming-soon-block .icon { font-size:2.8rem; opacity:.2; }
.coming-soon-block h3 { font-size:.9rem; font-weight:700; }
.coming-soon-block p {
  font-size:.74rem;
  font-family:var(--font-mono);
  text-align:center;
  max-width:300px;
  line-height:1.7;
}
.posto-header { margin-bottom:20px; }
.posto-header h2 { font-size:1.25rem; font-weight:800; margin-bottom:3px; }
